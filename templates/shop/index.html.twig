{% extends 'base_public.html.twig' %}

{% block title %}
    {% if currentCategory %}
        {{ currentCategory.name }} - Boutique
    {% else %}
        Tous les produits - Boutique
    {% endif %}
{% endblock %}

{% block body %}
<div class="container">
    <h1 class="section-title">
        {% if currentCategory %}
            {{ currentCategory.name }}
        {% else %}
            Tous nos produits
        {% endif %}
    </h1>
    
    {% if currentCategory and currentCategory.description %}
        <p style="margin-bottom: 2rem; color: #666;">{{ currentCategory.description }}</p>
    {% endif %}
    
    {% if currentCategory %}
        <p style="margin-bottom: 1rem;">
            <a href="{{ path(r('SHOP').value) }}" style="color: #667eea; text-decoration: none;">
                ‚Üê Retour √† tous les produits
            </a>
        </p>
    {% endif %}

    <div class="products-grid">
        {% for product in products %}
            <a href="{{ path(r('SHOP_PRODUCT').value, {slug: product.slug}) }}" class="product-card">
                <div class="product-image">
                    {% if product.category.slug == 'skis' %}
                        üéø
                    {% elseif product.category.slug == 'snowboards' %}
                        üèÇ
                    {% elseif product.category.slug == 'boots' %}
                        üë¢
                    {% elseif product.category.slug == 'clothing' %}
                        üß•
                    {% elseif product.category.slug == 'accessories' %}
                        ü•Ω
                    {% else %}
                        ‚ùÑÔ∏è
                    {% endif %}
                </div>
                <div class="product-info">
                    <div class="product-name">{{ product.name }}</div>
                    <div class="product-description">
                        {{ product.description }}
                    </div>
                    <div class="product-footer">
                        <div class="product-price">{{ product.price }} ‚Ç¨</div>
                        <div class="product-stock {% if product.stock == 0 %}stock-out{% elseif product.stock < 5 %}stock-low{% endif %}">
                            {% if product.stock == 0 %}
                                Rupture de stock
                            {% elseif product.stock < 5 %}
                                Plus que {{ product.stock }}
                            {% else %}
                                En stock
                            {% endif %}
                        </div>
                    </div>
                </div>
            </a>
        {% else %}
            <p>Aucun produit disponible dans cette cat√©gorie.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}